## 上下文
- 排查变更已明确性能风险点与日志方案
- 本变更用于落实具体优化实现，分 P0/P1/P2

## 目标 / 非目标
- 目标：降低首次加载与搜索过滤延迟；减少无意义全量重载；控制渲染压力
- 目标：保持行为一致，不影响 OpenSpec 结构显示
- 非目标：引入新依赖或重做 UI 设计
- 非目标：跨平台优化（仅 Windows）

## 决策
- 目录树构建：初次加载必要层级，后台自动全量加载；禁止仅限深度导致不可达
- 监听策略：合并/节流文件变更，避免重复回调
- 任务进度：按需读取，限制并发
- 搜索过滤：防抖 + 缓存上次结果
- 渲染：树虚拟化或分页，Markdown/高亮按需

## 风险 / 权衡
- 后台全量加载需考虑节流与 I/O 峰值
- 虚拟化可能影响搜索定位与滚动定位

## 迁移计划
- P0 -> P1 -> P2 依序实施
- 每阶段完成后使用 perf.jsonl 对比基线

## 待决问题
- 树虚拟化采用自研还是引入轻量方案（需遵守最小依赖）
- 目录树按需加载的最小交互约束（展开深度/分页）
